Теория
======

Основные понятия
----------------

НИМС строится вокруг трех основных сущностей: история, персонаж и событие.

*Персонаж* - это некоторый субъект в мире игры. 

	Мы сознательно не вводим понятие *игрок* и *роль*, так как считаем, что на этапе работы над вводными у мастера должна быть возможность абстрагироваться от конкретных игроков.  

*История* - это законченная сюжетная единица. В истории принимают участие сколько-то персонажей.

История состоит из *событий*. У каждого события указано *время наступления события* и *список персонажей*, принявших участие в событии. Событие это единство места, времени и персонажей, соответствует явлению в классической драматургии.

.. note:: Пример

	История: Колобок

	Персонажи: бабка, дед, Колобок, заяц, медведь, волк, лиса

	Событие 1: бабка с дедом испекли Колобка. Участники: бабка, дед, Колобок

	...

	Событие х: Колобок встретил волка, спел песенку и убежал. Участники: Колобок, волк

	...
	
.. _secondary-entity-profile:

Досье
^^^^^

*Досье* - набор фактов о персонаже, имеющих существенное значение в процессе подготовки к РИ.

Для всех персонажей можно (и нужно) завести *досье*. Досье нужно для указания данных персонажа как-то: пол, семья, возраст, способности, профессии и т.д. Без досье мы знаем о персонаже только его имя. Структура досье описывается на подвкладке *Конструктор досье*. На этой подвкладке вы определяете какие поля досье вам нужны, а потом заполняете их для каждого персонажа.

Досье играет очень большую роль. На его основе работают Фильтр персонажей и Группы. Так же информация из досье может быть выведена во вводные.

.. note:: Пример

	Можно указать в досье бабки, что она пекарь 1го разряда и ей 65 лет.
	
.. _secondary-entity-inventory:

Инвентарь персонажа
^^^^^^^^^^^^^^^^^^^

В рамках истории ключевую роль может играть некий предмет и мастерской группе необходимо зафиксировать, у какого персонажа на начало игры предмет будет находиться, чтобы выдать его до игры. Инвентарь так же выводится во вводную.

.. note:: Пример

	Можно указать в инвентаре бабки наличие скалки.

Группы
^^^^^^

*Фильтр персонажей* - логическое условие, определяющее правило формирования подмножества персонажей. Фильтр формируется на основе досье персонажа и на статистических данных о персонаже.

.. note:: Пример

	В досье имеются данные о возрасте персонажа и его принадлежности к мафиозной семье. Мы можем сформировать фильтр: показать персонажей младше 30 лет из семьи Сальери.

.. note:: Пример

	Для анализа проработанности вводных мы хотим посмотреть персонажей с небольшим количеством историй. Для этого мы формируем фильтр: показать персонажей, участвующих в менее чем 3 историях.
	
Под *группой* мы подразумеваем некоторое количество персонажей, объединённых общим признаком. Группа может включать несколько персонажей, может быть пустой, может включать всех. Признак вхождения персонажа в группу описывается фильтром.

.. note:: Пример

	В досье имеются данные о принадлежности персонажа к мафиозной семье. Мы создаем группу ``Семья Сальери``. Фильтр этой группы "персонаж из семьи Сальери". Аналогично создаётся группа для семьи Морелло.

Данный подход исключает ручное включение/переключение персонажа между группами. Изменяя досье персонажа вы автоматически выводите персонажа из одних групп и включаете в другие.

.. note:: Пример

	Вы решили, что персонажа нужно перевести из семьи Морелло в семью Сальери. Вы изменяете принадлежность персонажа в досье. С этого момента персонаж не будет видеть никакой информации, специфичной для семьи Морелло, а только информацию для семьи Сальери.

С группой персонажа ассоциированы дополнительные данные, именуемые *досье группы*. Структура досье группы не редактируема и состоит из мастерского описания группы, текста для персонажа и нужно ли выводить данные о группе во вводные. Подробнее смотрите в разделе :ref:`groups-desc`.

Отношения
^^^^^^^^^

*Отношения* это информация как персонажи относятся друг к другу. Реализовано с помощью текстового описания. Персонаж может иметь отношение как к знакомым персонажам, так и к не знакомцам.

.. note:: Пример

	Рядовой налётчик банды Сальери может иметь своё отношение к дону Сальери и отношение к дону Морелло по слухам от других налётчиков. Дон Сальери может знать, что у него есть такой налётчик. А дон Морелло может быть совершенно не в курсе о всех налётчиках семьи Сальери.

.. _secondary-entities-desc:

Вторичные сущности
------------------

.. _secondary-entity-activity:
	
Активность персонажа
^^^^^^^^^^^^^^^^^^^^

При работе над НИМС возник вопрос "А можем ли мы как-то интегрировать шестеренку ролей?". Как оказалось шестеренка это отдельная сущность и к имеющимся в НИМСе данным плохо применимая. Вместо этого мы реализовали другой инструмент - *отметки об активности*. У каждого персонажа можно указать тип активности персонажа в истории. Мы зафиксировали следующие виды активности:

	#. Актив - персонаж играет в истории активную роль. Пример: Фродо, Дон Кихот
	#. Спутник - персонаж идет в след за кем-то, но ему самому цель вторична. Пример: Сэм и Санчо Панса.
	#. Защита - персонаж защищается от преследователей. Пример: шпион в облаве, убийца в детективной истории.
	#. Пассив - персонаж, владеющий информацией или артефактами в истории, но не преследующий никаких целей.
	
.. note::

	Персонаж может одновременно иметь несколько активностей в одной истории. 

.. note::

	Персонаж может иметь разные виды активности в разных историях. 

.. note:: Пример
	
	Дед в Колобке пассивен - он не пытается догнать и вернуть Колобка. Дед в Репке активен - он активно хочет выдернуть репку.

Графическое (а в дальнейшем, и статистическое) отображение активностей позволит оценить степень и качество загруженности персонажа, то есть выполнить ту задачу, которую обычно решают с помощью шестеренки.

Карта сюжета
^^^^^^^^^^^^

При работе над РИ возникает необходимость в получении общей оценки ситуации. Для этого была сделана *карта сюжета*. *карта сюжета* это схема, на которую выносятся активные группы и ресурсы и прописываются связи между ними. Связи описывают конфликты и интересы групп. Связи являются направленными. Исходить связь может только из группы, а входить и в группу и в ресурс. Группы добавляются из списка существующих групп. Ресурсы заводятся прямо на карте сюжета. Карта сюжета собирается вручную. Подробнее смотрите в разделе .

.. note::

	Семья Сальери враждует с семьёй Морелло и наоборот.
	
.. note::

	Семья Морелло владеет бизнесом, прикрывающим угоны автомобилей. Семья Сальери хочет забрать контроль над этим бизнесом у Морелло.
	
.. note::

	Семья Морелло работает с бандой бутлегеров и доверяет им. Бутлегеры же в тайне сотрудничают с семьёй Сальери.
	
